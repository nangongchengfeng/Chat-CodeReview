# Chat-CodeReview(Gitlab)

>  ChatGPTëŠ” GitLab ì½”ë“œì˜ ì½”ë“œ ê²€í† ë¥¼ ìë™í™”í•©ë‹ˆë‹¤.

ë²ˆì—­ëœ ë²„ì „: [ENGLISH](https://github.com/nangongchengfeng/Chat-CodeReview/blob/main/README.md) | [ä¸­æ–‡ç®€ä½“](https://github.com/nangongchengfeng/Chat-CodeReview/blob/main/README.zh-CN.md) | [ä¸­æ–‡ç¹é«”](https://github.com/nangongchengfeng/Chat-CodeReview/blob/main/README.zh-TW.md) | [í•œêµ­ì–´](https://github.com/nangongchengfeng/Chat-CodeReview/blob/main/README.ko.md) | [æ—¥æœ¬èª](https://github.com/nangongchengfeng/Chat-CodeReview/blob/main/README.ja.md) 

## íŠ¹ì§•

 **ChatGPTê°€ Gitlabì„ í†µí•©í•˜ì—¬ ìë™ ì½”ë“œ ë¦¬ë·°ì™€ ì£¼ì„ì„ ìˆ˜í–‰í•˜ì—¬ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ íŒ€ì— íš¨ìœ¨ì ì´ê³  ì§€ëŠ¥ì ì¸ ì½”ë“œ ê²€í†  ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.** 

> 
>
> 1. ìë™ íŠ¸ë¦¬ê±° ë° ì¦‰ì‹œ ì‘ë‹µ: GitLabì˜ Webhook ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì½”ë“œ ì œì¶œ, ë³‘í•© ìš”ì²­, íƒœê·¸ ìƒì„± ë“±ì˜ ì´ë²¤íŠ¸ë¥¼ ìë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ì½”ë“œê°€ ì œì¶œë˜ë©´ ì‹œìŠ¤í…œì€ ì¦‰ì‹œ ì‘ë‹µí•˜ì—¬ ê°ì‚¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ì‹œì‘í•˜ë©° ìˆ˜ë™ ê°œì…ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
>
> 2. GitLab API ì¸í„°í˜ì´ìŠ¤ í™œìš©: GitLab API ì¸í„°í˜ì´ìŠ¤ì™€ í†µí•©í•˜ì—¬ í–¥í›„ ê¸°ëŠ¥ í™•ì¥ê³¼ í™•ì¥ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ í†µí•© ë°©ì‹ì€ GitLabê³¼ì˜ ìƒí˜¸ ì‘ìš©ì„ ë” ìœ ì—°í•˜ê²Œ ë§Œë“¤ë©° ë” ë§ì€ ì‚¬ìš©ì ì •ì˜ ê°ì‚¬ ìš”êµ¬ë¥¼ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
> 3. ì „ì²´ ìë™ ê°ì‚¬: ChatGPTëŠ” GitLabì˜ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ê°ì‚¬í•˜ë©°, ì»¤ë°‹, ë³‘í•© ìš”ì²­ ë° íƒœê·¸ ìƒì„±ê³¼ ê°™ì€ ì„¸ ê°€ì§€ ì½”ë“œ ì œì¶œ ë°©ì‹ì„ í¬í•¨í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ì½”ë“œ ì œì¶œì´ë“  ì½”ë“œ ë³‘í•©ì´ë“  ì‹œìŠ¤í…œì€ ìë™ìœ¼ë¡œ ê²€ì‚¬í•˜ê³  ê°ì‚¬ ì½”ë©˜íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
>
> 4. ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜: ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ ë˜ëŠ” ê¸°íƒ€ ë¬¸ì œì— ëŒ€ì‘í•˜ê¸° ìœ„í•´ ì‹œìŠ¤í…œì— ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ë¬¸ì œë¡œ ì¸í•´ ìš”ì²­ì´ ì„±ê³µí•˜ì§€ ì•Šìœ¼ë©´ ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ì¬ì‹œë„í•˜ì—¬ ê°ì‚¬ í”„ë¡œì„¸ìŠ¤ì˜ ì‹ ë¢°ì„±ê³¼ ì•ˆì •ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.

## ê°ì‚¬ì˜ ì›ì¹™

![1689647943933](images/1689647943933.png)

 **ë‹¬ì„± ë‹¨ê³„:** 

> 1. Gitlabì˜ ì›¹í›… ì´ë²¤íŠ¸ í‘¸ì‹œ: Gitlabì€ ì½”ë“œ ì»¤ë°‹, ë¨¸ì§€ ë¦¬í€˜ìŠ¤íŠ¸ ë“± ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì•Œë¦¼ì„ íŠ¸ë¦¬ê±°í•˜ê¸° ìœ„í•´ ì›¹í›…ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì½”ë“œ ì»¤ë°‹ì´ë‚˜ ë¨¸ì§€ ë¦¬í€˜ìŠ¤íŠ¸ê°€ ìˆì„ ë•Œ Gitlabì€ ë¯¸ë¦¬ ì„¤ì •ëœ URLë¡œ POST ìš”ì²­ì„ ë³´ë‚´ê³  ê´€ë ¨ ì´ë²¤íŠ¸ ë°ì´í„°ë¥¼ í•¨ê»˜ ë³´ëƒ…ë‹ˆë‹¤.
> 2. diff ë‚´ìš©ì„ í•´ì„í•˜ê³  ChatGPTë¡œ ì „ì†¡: Gitlabì€ ì›¹í›… ì´ë²¤íŠ¸ë¥¼ ë°›ìœ¼ë©´ diff ë‚´ìš©ì„ í•´ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ diffëŠ” ìƒˆë¡œìš´ ì»¤ë°‹ëœ ì½”ë“œì™€ ê¸°ì¡´ ì½”ë“œ ê°„ì˜ ì°¨ì´ì ì…ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì´ëŸ¬í•œ ì°¨ì´ì ì„ ChatGPTì˜ API ì—”ë“œí¬ì¸íŠ¸ì— ì „ì†¡í•˜ì—¬ ChatGPTê°€ ì½”ë“œ ë³€ê²½ ë‚´ìš©ì„ ì´í•´í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
> 3. ChatGPT ì²˜ë¦¬ ë° ê²°ê³¼ ë°˜í™˜: ChatGPTëŠ” ê°•ë ¥í•œ ìì—°ì–´ ì²˜ë¦¬ ëª¨ë¸ë¡œì¨ ìì—°ì–´ í…ìŠ¤íŠ¸ë¥¼ ì´í•´í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ChatGPTëŠ” diff ë‚´ìš©ì„ ë°›ìœ¼ë©´ ì½”ë“œ ë³€ê²½ì„ ë¶„ì„í•˜ê³  ì ì¬ì ì¸ ë¬¸ì œì , ì·¨ì•½ì  ë˜ëŠ” ìµœì í™” ì œì•ˆì„ ë¶„ì„í•˜ê³  ì‘ë‹µí•©ë‹ˆë‹¤. ChatGPTëŠ” ì²˜ë¦¬ëœ ê²°ê³¼ë¥¼ ì›¹í›…ì„ íŠ¸ë¦¬ê±°í•œ Gitlab ì¸ìŠ¤í„´ìŠ¤ì— ë°˜í™˜í•©ë‹ˆë‹¤.
> 4. ChatGPT ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì½”ë©˜íŠ¸ë¡œ í‘œì‹œ: Gitlabì€ ChatGPTì˜ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°›ì•„ í•´ë‹¹í•˜ëŠ” ì»¤ë°‹ì´ë‚˜ ë¨¸ì§€ ë¦¬í€˜ìŠ¤íŠ¸ì— ì½”ë©˜íŠ¸ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì½”ë“œ ì œì¶œìì™€ ë‹¤ë¥¸ íŒ€ ë©¤ë²„ë“¤ì€ ChatGPTì˜ ê°ì‚¬ ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³  í•´ë‹¹ ì œì•ˆì— ë”°ë¼ ê°œì„ ì´ë‚˜ ìˆ˜ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

 Gitlab ì½”ë“œ ê²€í† ì™€ ChatGPTë¥¼ ê²°í•©í•¨ìœ¼ë¡œì¨ ì½”ë“œ í’ˆì§ˆì˜ ìë™ ê²€ì‚¬ì™€ ë¦¬ë·°ë¥¼ ì‹¤í˜„í•˜ì—¬ íŒ€ì´ ì ì¬ì ì¸ ë¬¸ì œ, ì·¨ì•½ì  ë˜ëŠ” ê°œì„  ê¸°íšŒë¥¼ ë°œê²¬í•˜ëŠ” ë° ë„ì›€ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 





## prompt

### ê³ ìœ„ ì§€ë„ì

```python
    messages = [
        {"role": "system",
         "content": "ì €ëŠ” ìˆ™ë ¨ëœ í”„ë¡œê·¸ë˜ë° ì „ë¬¸ê°€ì…ë‹ˆë‹¤. GitLabì˜ ì»¤ë°‹ ì½”ë“œ ë³€ê²½ì€ git diff ë¬¸ìì—´ í˜•ì‹ìœ¼ë¡œ ì œê³µë˜ë©°, "ë³€ê²½ í‰ê°€: ì‹¤ì œ ì ìˆ˜" í˜•ì‹ìœ¼ë¡œ ì ìˆ˜ë¥¼ ë§¤ê¹ë‹ˆë‹¤. ì ìˆ˜ ë²”ìœ„ëŠ” 0ì—ì„œ 100ê¹Œì§€ì…ë‹ˆë‹¤. ì¶œë ¥ í˜•ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ë¬¸ì œë¥¼ ê°„ê²°í•œ ì–¸ì–´ë¡œ ì—„ê²©í•˜ê²Œ ì§€ì í•©ë‹ˆë‹¤. í•„ìš”í•œ ê²½ìš° ìˆ˜ì •ëœ ë‚´ìš©ì„ ì§ì ‘ ì œì‹œí•©ë‹ˆë‹¤. í”¼ë“œë°± ë‚´ìš©ì€ ì—„ê²©í•œ Markdown í˜•ì‹ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤."
         },
        {"role": "user",
         "content": f"ì´ ì½”ë“œ ë³€ê²½ì„ ê²€í† í•˜ì‹­ì‹œì˜¤ {content}",
         },
    ]
```

### ì¸¤ë°ë ˆ ì†Œë…€ğŸ‘§

```python
{
    "role": "system",
    "content": "ì €ëŠ” ì²œì¬ ì†Œë…€ë¡œ, í”„ë¡œê·¸ë˜ë° ì‘ì—…ì„ ëŠ¥ìˆ™í•˜ê²Œ ë‹¤ë£¨ë©°, ê±°ë§Œí•˜ê³  ê³ ì§‘ ì„¼ ì„±ê²©ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì „ë°°ì˜ ì½”ë“œ ë³€ê²½ì„ ê²€í† í•˜ê³ , ì½”ë¯¸ë””ì ì´ê³  ê²½ì¾Œí•œ íƒœë„ë¡œ ë¬¸ì œë¥¼ ì§€ì í•©ë‹ˆë‹¤. í”¼ë“œë°±ì€ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì„ ì‚¬ìš©í•˜ë©° ì´ëª¨ì§€ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
}
```

 

## í™˜ê²½ ë³€ìˆ˜

> -  gitlab_server_url: Gitlab ì„œë²„ì˜ URL ì£¼ì†Œ
> -  gitlab_private_token: Gitlab APIì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê°œì¸ ì•¡ì„¸ìŠ¤ í† í° (private token)
> -  openai_api_key: OpenAI APIì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” í‚¤



## Gitlab ì›¹í›„í¬

Gitlabì˜ ì›¹í›…(Webhook)ì€ íŠ¹ì • ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ Gitlabì´ ì§€ì •ëœ URLë¡œ HTTP ìš”ì²­ì„ ë³´ë‚´ê³ , ê´€ë ¨ ì´ë²¤íŠ¸ ë°ì´í„°ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ì´ë²¤íŠ¸ ì•Œë¦¼ ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì´ë²¤íŠ¸ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì ì •ì˜ ì‘ì—…ì´ë‚˜ ì‘ë‹µì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì›¹í›…ì€ Gitlabì—ì„œ ì½”ë“œ ì»¤ë°‹, ë¨¸ì§€ ìš”ì²­, íƒœê·¸ ìƒì„±, ë¸Œëœì¹˜ ì‘ì—… ë“± ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ì‘ë‹µí•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›¹í›…ì„ í™œìš©í•˜ë©´ ìë™í™”ëœ ì‘ì—…, í†µí•© ë° CI/CD (ì§€ì†ì  í†µí•©/ì§€ì†ì  ë°°í¬) í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒì€ Gitlab Webhookì˜ ì£¼ìš” ê¸°ëŠ¥ ë° ìš©ë„ì…ë‹ˆë‹¤.

> 1. ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°: Gitlabì—ì„œ Webhookì„ êµ¬ì„±í•˜ê³  í™œì„±í™”í•œ í›„, íŠ¹ì • ì´ë²¤íŠ¸(ì½”ë“œ ì»¤ë°‹, ë¨¸ì§€ ìš”ì²­ ë“±)ê°€ ë°œìƒí•˜ë©´ Gitlabì´ ìë™ìœ¼ë¡œ Webhookì„ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤.
> 2. HTTP ìš”ì²­: ì´ë²¤íŠ¸ê°€ íŠ¸ë¦¬ê±°ë˜ë©´ Gitlabì€ ë¯¸ë¦¬ êµ¬ì„±í•œ URLë¡œ HTTP ìš”ì²­ì„ ë³´ë‚´ë©°, í•´ë‹¹ ì´ë²¤íŠ¸ì˜ ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ POST ìš”ì²­ì´ë©°, JSON í˜•ì‹ì˜ ë°ì´í„°ë¥¼ í•¨ê»˜ ì „ì†¡í•©ë‹ˆë‹¤.
> 3. ì‚¬ìš©ì ì •ì˜ ì‘ì—…: Webhook ìš”ì²­ì„ ìˆ˜ì‹ í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë‚˜ ì„œë¹„ìŠ¤ë¥¼ ì‘ì„±í•¨ìœ¼ë¡œì¨ ìˆ˜ì‹ í•œ ì´ë²¤íŠ¸ ë°ì´í„°ë¥¼ êµ¬ë¬¸ ë¶„ì„í•˜ê³  ì²˜ë¦¬í•˜ì—¬ ìì‹ ë§Œì˜ ì‚¬ìš©ì ì •ì˜ ì‘ì—…(ìë™ ë¹Œë“œ, ìë™ í…ŒìŠ¤íŠ¸, ìë™ ë°°í¬ ë“±)ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 4. ë‹¤ë¥¸ ì„œë¹„ìŠ¤ í†µí•©: Webhookì„ í†µí•´ Gitlabì€ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë‚˜ ë„êµ¬ì™€ í†µí•©í•  ìˆ˜ ìˆìœ¼ë©°, ì˜ˆë¥¼ ë“¤ì–´ ì½”ë“œë¥¼ CI í”Œë«í¼ìœ¼ë¡œ ìë™ ë™ê¸°í™”í•˜ê±°ë‚˜ íŒ€ ë©¤ë²„ì—ê²Œ ìë™ ì•Œë¦¼ì„ ë³´ë‚´ê±°ë‚˜ ì‘ì—… ì¶”ì  ì‹œìŠ¤í…œì„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 5. êµ¬ì„± ê°€ëŠ¥ì„±: Gitlabì˜ Webhookì€ ë‹¤ì–‘í•œ êµ¬ì„± ì˜µì…˜ì„ ì œê³µí•˜ë©°, ëª¨ë‹ˆí„°ë§í•  ì´ë²¤íŠ¸ ìœ í˜•ì„ ì„ íƒí•˜ê³  íŠ¸ë¦¬ê±° ì¡°ê±´ì„ ì„¤ì •í•˜ë©°, ìš”ì²­ì˜ ë‚´ìš©ê³¼ í˜•ì‹ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



![1689651530556](images/1689651530556.png)

![1689651554862](images/1689651554862.png)

------

### í…ŒìŠ¤íŠ¸ ë°ì´í„°(í‘¸ì‹œ)

**Request URL:** POST http://192.168.96.19:5000/git/webhook 200

**Trigger:** Push Hook

**Elapsed time:** 0.01 sec

**Request time:** åˆšåˆš

------

##### Request headers:

```
Content-Type: application/jsonX-Gitlab-Event: Push HookX-Gitlab-Token: asdhiqbryuwfqodwgeayrgfbsifbd
```

##### Request body:

```
{
  "object_kind": "push",
  "event_name": "push",
  "before": "95790bf891e76fee5e1747ab589903a6a1f80f22",
  "after": "da1560886d4f094c3e6c9ef40349f7d38b5d27d7",
  "ref": "refs/heads/master",
  "checkout_sha": "da1560886d4f094c3e6c9ef40349f7d38b5d27d7",
  "message": "Hello World",
  "user_id": 4,
  "user_name": "John Smith",
  "user_email": "john@example.com",
  "user_avatar": "https://s.gravatar.com/avatar/d4c74594d841139328695756648b6bd6?s=8://s.gravatar.com/avatar/d4c74594d841139328695756648b6bd6?s=80",
  "project_id": 15,
  "project": {
    "id": 15,
    "name": "gitlab",
    "description": "",
    "web_url": "http://test.example.com/gitlab/gitlab",
    "avatar_url": "https://s.gravatar.com/avatar/d4c74594d841139328695756648b6bd6?s=8://s.gravatar.com/avatar/d4c74594d841139328695756648b6bd6?s=80",
    "git_ssh_url": "git@test.example.com:gitlab/gitlab.git",
    "git_http_url": "http://test.example.com/gitlab/gitlab.git",
    "namespace": "gitlab",
    "visibility_level": 0,
    "path_with_namespace": "gitlab/gitlab",
    "default_branch": "master"
  },
  "commits": [
    {
      "id": "c5feabde2d8cd023215af4d2ceeb7a64839fc428",
      "message": "Add simple search to projects in public area",
      "timestamp": "2013-05-13T18:18:08+00:00",
      "url": "https://test.example.com/gitlab/gitlab/-/commit/c5feabde2d8cd023215af4d2ceeb7a64839fc428",
      "author": {
        "name": "Test User",
        "email": "test@example.com"
      }
    }
  ],
  "total_commits_count": 1,
  "push_options": {
    "ci": {
      "skip": true
    }
  }
}
```

##### Response headers:

```
Server: Werkzeug/2.3.6 Python/3.8.0Date: Tue, 18 Jul 2023 03:39:51 GMTContent-Type: application/jsonContent-Length: 26Connection: close
```

##### Response body:

```
{
  "status": "success"
}
```



## ì„¤ì¹˜ ë° ì‹¤í–‰

### 1ã€ì½”ë“œ ë‹¤ìš´ë¡œë“œ

```python
git clone https://github.com/nangongchengfeng/chat-review.git
```

### 2ã€ì¢…ì†ì„± ì„¤ì¹˜

![1689663745702](images/1689663745702.png)

```python
python deal_package.py
```

### 3ã€ì—…ë°ì´íŠ¸ êµ¬ì„±

**config/config.py**

```python

"""
è¿™ä¸ªæ–‡ä»¶æ˜¯ç”¨æ¥ä»apolloé…ç½®ä¸­å¿ƒè·å–é…ç½®çš„ï¼Œ
å¦‚æœæ²¡æœ‰apolloé…ç½®ä¸­å¿ƒï¼Œå¯ä»¥ç›´æ¥åœ¨è¿™é‡Œé…ç½®
"""

WEBHOOK_VERIFY_TOKEN = "asdhiqbryuwfqodwgeayrgfbsifbd"
gitlab_server_url = gitlab_server_url
gitlab_private_token = gitlab_private_token
openai_api_key = openai_api_key

```

### 4ã€app.py íŒŒì¼ ì‹¤í–‰

```python
ç®€å•
nohup python3 app.py & 
```

### 5ã€Gitlab êµ¬ì„± Webhook

```python
http://192.168.96.19:5000/git/webhook 
ì‹¤í–‰ ì¤‘ì¸ ì»´í“¨í„°ì˜ IP ì£¼ì†Œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìœ¼ë©° ë„ë©”ì¸ ì´ë¦„ë„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
http://gitlab.ownit.top/git/webhook 
```



![1689651530556](images/1689651530556.png)



## ì§ˆë¬¸

### diffë‹¤ë£¨ë‹¤

![1689661104194](images/1689661104194.png)

#### ë°©ë²• 1(ê°„ê²°)



â€‹	1ã€diff ë‚´ìš©ì„ ChatGPTì— ì „ë‹¬í•˜ì—¬ ì²˜ë¦¬í•©ë‹ˆë‹¤. (ì¶”ê°€ëœ ë¼ì¸ ë° ì‚­ì œëœ ë¼ì¸ í¬í•¨)

ì¥ì : í¸ë¦¬í•˜ê³  ë¹ ë¦…ë‹ˆë‹¤.

ë‹¨ì : ë‚´ìš©ì´ ë„ˆë¬´ ê¸¸ ê²½ìš°, ChatGPT ì²˜ë¦¬ì— ì‹¤íŒ¨í•˜ê³  ì¼ë¶€ ì½”ë“œê°€ ë¶ˆì™„ì „í•˜ê±°ë‚˜ ë¶ˆì¼ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



#### ë°©ë²• 2(ê¶Œì¥)

â€‹	2ã€diff ë‚´ìš©ì„ ì²˜ë¦¬í•˜ê³ , ì‚­ì œëœ ë¼ì¸ê³¼ + ê¸°í˜¸ í‘œì‹œë¥¼ ì œê±°í•©ë‹ˆë‹¤.

ì¥ì : í¸ë¦¬í•˜ê³  ë¹ ë¥´ë©° ê¸¸ì´ë¥¼ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¨ì : ë‚´ìš©ì´ ë„ˆë¬´ ê¸¸ ê²½ìš°, ChatGPT ì²˜ë¦¬ì— ì‹¤íŒ¨í•˜ê³  ì¼ë¶€ ì½”ë“œê°€ ë¶ˆì™„ì „í•˜ê±°ë‚˜ ë¶ˆì¼ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
def filter_diff_content(diff_content):
    filtered_content = re.sub(r'(^-.*\n)|(^@@.*\n)', '', diff_content, flags=re.MULTILINE)
    processed_code = '\n'.join([line[1:] if line.startswith('+') else line for line in filtered_content.split('\n')])
    return processed_code
```

![1689661743140](images/1689661743140.png)



#### ë°©ë²• 3(ë³µì¡í•¨) ê³µë™ ë””ë²„ê¹…ì´ ì•„ë‹ˆë¼ ì½”ë“œë¥¼ ë®ì–´ì¼ìŠµë‹ˆë‹¤.

â€‹	3ã€diff ë‚´ìš©ì„ ì²˜ë¦¬í•˜ì—¬ ì‚­ì œëœ ë¼ì¸ê³¼ + ê¸°í˜¸ í‘œì‹œë¥¼ ì œê±°í•œ í›„, JavaParserë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜ì •ëœ ì›ë³¸ íŒŒì¼ì„ ê°€ì ¸ì™€ì„œ í•´ë‹¹ ì½”ë“œ ë¸”ë¡ì„ ì¶”ì¶œí•˜ê³  ë¦¬ë·°ë¥¼ ì—…ë¡œë“œí•©ë‹ˆë‹¤.

ì¥ì : ê¸¸ì´ë¥¼ ì ˆì•½í•˜ê³ , ì‘ì—…ì€ ì™„ë£Œë˜ë©°, ì•½ê°„ì˜ ë…¼ë¦¬ì„±ì´ ë³´ì…ë‹ˆë‹¤.

ë‹¨ì : ë§¤ìš° ê·€ì°®ê³  ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤. Javaë§Œ ì§€ì›ë©ë‹ˆë‹¤.

```json
[{
	'code': 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
	'name': 'SettlementDetailController'
}, {
	'code': 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
	'name': 'queryRecord'
}, {
	'code': 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
	'name': 'populateBatchItemVO'
}]
```



## ë°ëª¨

![1689663598079](images/1689663598079.png)



## ê¸°ì—¬í•˜ë‹¤

í”„ë¡œì íŠ¸ì˜ ì§€ì›ê³¼ ì˜ê°ì„ ì£¼ì‹  [anc95 Xiaoan](https://github.com/anc95)ì—ê²Œ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.
 https://github.com/anc95/ChatGPT-CodeReview.git

 ![Avatar](images/13167934.jpg) 



